import os
import matplotlib.pyplot as plt


def create_directory_if_not_exixts(directory):
    if not os.path.exists(directory):
        os.makedirs(directory)


def merge():
    # seq 8
    onnx_x_seq_8_gtx = [1, 4, 7, 10, 13, 16, 19, 22, 25, 28, 31, 34, 37, 40, 43, 46, 49, 52, 55, 58, 61]
    onnx_y_seq_8_gtx = [1.1097857093811035, 0.6741784763336182, 0.6323427963256836, 0.6320896816253662, 0.5370578765869141, 0.5100720167160034, 0.48201941967010497, 0.47270545959472654, 0.43335781097412107, 0.4208471488952637, 0.45255532264709475, 0.4212460517883301, 0.40050253868103025, 0.42078917026519774, 0.3992676496505737, 0.3841599702835083, 0.37597506046295165, 0.4034564971923828, 0.3975015640258789, 0.38778765201568605, 0.4194668769836426]

    pytorch_x_seq_8_gtx = [1, 4, 7, 10, 13, 16, 19, 22, 25, 28, 31, 34, 37, 40, 43, 46, 49, 52, 55, 58, 61]
    pytorch_y_seq_8_gtx = [1.5973204135894776, 0.75296471118927, 0.6148876667022705, 0.6222332954406739, 0.5515121269226074, 0.5717318916320801, 0.5243278408050537, 0.4975219440460205, 0.48617655754089354, 0.4536135482788086, 0.48776051998138426, 0.45685319900512694, 0.4640310287475586, 0.47856454849243163, 0.453161883354187, 0.4368752956390381, 0.43666706085205076, 0.4655331611633301, 0.45356011390686035, 0.4403460741043091, 0.4758429050445557]

    onnx_x_seq_8_rtx = [1, 4, 7, 10, 13, 16, 19, 22, 25, 28, 31, 34, 37, 40, 43, 46, 49, 52, 55, 58, 61]
    onnx_y_seq_8_rtx = [1.0238662004470824, 0.31614372730255125, 0.2108910083770752, 0.17585883140563965, 0.146254301071167, 0.14942419528961182, 0.13618876934051513, 0.12956633567810058, 0.12354936599731445, 0.12506284713745117, 0.11532778739929199, 0.10664300918579102, 0.10283420085906983, 0.10303699970245361, 0.10107631683349609, 0.10374033451080322, 0.10257117748260498, 0.09667081832885742, 0.0981590747833252, 0.09553754329681396, 0.09617729187011718]

    pytorch_x_seq_8_rtx = [1, 4, 7, 10, 13, 16, 19, 22, 25, 28, 31, 34, 37, 40, 43, 46, 49, 52, 55, 58, 61]
    pytorch_y_seq_8_rtx = [1.8675801753997803, 0.43485317230224607, 0.27812025547027586, 0.2071887731552124, 0.16599254608154296, 0.14885547161102294, 0.14063541889190673, 0.1300344467163086, 0.12554030418395995, 0.12897400856018065, 0.1275630235671997, 0.1145082950592041, 0.1038980484008789, 0.10516102313995361, 0.09993982315063477, 0.10028367042541504, 0.10008280277252198, 0.09615921974182129, 0.09987084865570069, 0.09824819564819336, 0.09979071617126464]

    # plt.plot(pytorch_x_seq_8_gtx[3:], pytorch_y_seq_8_gtx[3:], label=f"Pytorch, gtx1050, seq - 8")

    # plt.plot(onnx_x_seq_8_gtx[3:], onnx_y_seq_8_gtx[3:], label=f"Onnx, gtx1050, seq - 8")

    # plt.plot(pytorch_x_seq_8_rtx[3:], pytorch_y_seq_8_rtx[3:], label=f"Pytorch, rtx3070, seq - 8")

    # plt.plot(onnx_x_seq_8_rtx[3:], onnx_y_seq_8_rtx[3:], label=f"Onnx, rtx3070, seq - 8")

    # seq 16
    onnx_x_seq_16_gtx = [1, 4, 7, 10, 13, 16, 19, 22, 25, 28, 31, 34, 37, 40, 43, 46, 49, 52, 55, 58, 61]
    onnx_y_seq_16_gtx = [1.3290669918060303, 0.9429068326950073, 1.0112038612365724, 0.7792630910873413, 0.8286534070968627, 0.7216259717941285, 0.773912000656128, 0.7974806547164917, 0.7353487014770508, 0.7751609086990356, 0.7259709358215332, 0.7632862329483032, 0.7197206735610961, 0.7424187421798706, 0.7282952308654785, 0.7003503799438476, 0.7202888011932373, 0.7208804130554199, 0.7587603092193603, 0.7410022974014282, 0.7710941314697266]

    pytorch_x_seq_16_gtx = [1, 4, 7, 10, 13, 16, 19, 22, 25, 28, 31, 34, 37, 40, 43, 46, 49, 52, 55, 58, 61]
    pytorch_y_seq_16_gtx = [2.5799047708511353, 1.0155606508255004, 0.8659056186676025, 0.8239886999130249, 0.774447751045227, 0.6967376232147217, 0.8232433557510376, 0.8128429412841797, 0.7505315065383911, 0.8296113014221191, 0.7597548246383667, 0.8111721277236938, 0.8007232427597046, 0.8140374422073364, 0.8476654767990113, 0.8297565698623657, 0.8609005451202393, 0.7905569553375245, 0.865976881980896, 0.8086470842361451, 0.8692073583602905]

    onnx_x_seq_16_rtx = [1, 4, 7, 10, 13, 16, 19, 22, 25, 28, 31, 34, 37, 40, 43, 46, 49, 52, 55, 58, 61]
    onnx_y_seq_16_rtx = [1.0508466958999634, 0.32585160732269286, 0.24298563003540039, 0.20463290214538574, 0.18764903545379638, 0.17243099212646484, 0.17444496154785155, 0.1648936986923218, 0.14400694370269776, 0.1401071548461914, 0.13293251991271973, 0.14145286083221437, 0.13152835369110108, 0.13799903392791749, 0.1368384838104248, 0.13539586067199708, 0.1302036762237549, 0.12736587524414061, 0.12673895359039306, 0.13391780853271484, 0.12870397567749023]

    pytorch_x_seq_16_rtx = [1, 4, 7, 10, 13, 16, 19, 22, 25, 28, 31, 34, 37, 40, 43, 46, 49, 52, 55, 58, 61]
    pytorch_y_seq_16_rtx = [1.922054934501648, 0.5990427970886231, 0.3454585552215576, 0.24286289215087892, 0.17973878383636474, 0.16500062942504884, 0.16357989311218263, 0.15451655387878419, 0.13832106590270996, 0.13820204734802247, 0.13470191955566407, 0.1269751787185669, 0.12511906623840333, 0.11895511150360108, 0.12354803085327148, 0.12147517204284668, 0.13071961402893068, 0.11927030086517335, 0.11905953884124756, 0.11960692405700683, 0.11928362846374511]

    plt.plot(pytorch_x_seq_16_gtx[3:], pytorch_y_seq_16_gtx[3:], label=f"Pytorch, gtx1050")

    plt.plot(onnx_x_seq_16_gtx[3:], onnx_y_seq_16_gtx[3:], label=f"Onnx, gtx1050")

    plt.plot(pytorch_x_seq_16_rtx[3:], pytorch_y_seq_16_rtx[3:], label=f"Pytorch, rtx3070")

    plt.plot(onnx_x_seq_16_rtx[3:], onnx_y_seq_16_rtx[3:], label=f"Onnx, rtx3070")


    directory = f"plots/"
    create_directory_if_not_exixts(directory)

    plt.xlabel("Rozmiar batcha")
    plt.ylabel("Czas [s]")
    plt.legend()
    plt.show()
    plt.savefig(f'{directory}pytorch_onnx_seq_16_rtx_gtx.png')

merge()
